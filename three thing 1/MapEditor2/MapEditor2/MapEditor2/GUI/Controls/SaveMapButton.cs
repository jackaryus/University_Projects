using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;

namespace MapEditor2.GUI.Controls
{
    //======================================================================================================================
    //
    //======================================================================================================================
    public class SaveMapButton : Button
    {
        //------------------------------------------------------------------------------------------------------------------
        //
        //------------------------------------------------------------------------------------------------------------------

        //------------------------------------------------------------------------------------------------------------------
        //
        //------------------------------------------------------------------------------------------------------------------
        public SaveMapButton(int x, int y, int width, int height, string label, Containers.Panel parent, Editor editor)
            : base(x, y, width, height, label, parent, editor)
        {
        }
        //------------------------------------------------------------------------------------------------------------------
        //
        //------------------------------------------------------------------------------------------------------------------
        public override Boolean CanSelect()
        {
            if (!this.editor.CanSave)
                return false;
            return base.CanSelect();
        }
        //------------------------------------------------------------------------------------------------------------------
        //
        //------------------------------------------------------------------------------------------------------------------
        public override void OnTrigger()
        {
            base.OnTrigger();
            SaveFileDialog saveForm = new SaveFileDialog();
            saveForm.Filter = "Map files (*.TM)|*.TM";

            if (saveForm.ShowDialog() == DialogResult.OK)
            {
                this.editor.MapPanel.SaveMap(saveForm.FileName);
            }
        }
    }
}
